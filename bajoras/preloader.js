const PRELOADER=".preloader",BACKGROUND=".preloader--background-2",JACKET_GAP_FILLER_SELECTOR=".preloader--jacket-gap-filler",JACKET_SELECTOR=".preloader--jacket",JACKET_LEFT_SELECTOR=".preloader--left",JACKET_RIGHT_SELECTOR=".preloader--right",BUTTON_SELECTOR=".preloader--button",LOADER_SELECTOR=".loader",preloader=document.querySelector(PRELOADER),background=document.querySelector(BACKGROUND),jacketGapFiller=document.querySelector(JACKET_GAP_FILLER_SELECTOR),jacket=document.querySelector(JACKET_SELECTOR),jacketLeft=jacket.querySelector(JACKET_LEFT_SELECTOR),jacketRight=jacket.querySelector(JACKET_RIGHT_SELECTOR),button=document.querySelector(BUTTON_SELECTOR),buttonImage=button.querySelector("img"),loader=document.querySelector(LOADER_SELECTOR),config={buttonChangeY:0},ease=Linear.easeNone,duration=.7,lastSegmentModifier=2;let timeline;const calculateTimeline=()=>{timeline=gsap.timeline({paused:!0}).addLabel("reset").set(jacketLeft,{x:void 0,ease:ease}).set(jacketRight,{x:void 0,ease:ease}).set(button,{x:void 0,ease:ease}).set(jacket,{opacity:void 0,ease:ease}).set(button,{top:void 0,ease:ease}).set(loader,{opacity:void 0,ease:ease}).set(buttonImage,{rotate:"-90",ease:ease}).set(loader.firstElementChild,{width:void 0,ease:ease}).set(background,{backgroundColor:void 0,ease:ease}).addPause().addLabel("loadAndSpin").to(loader.firstElementChild,{width:"100%",ease:ease}).to(buttonImage,{rotate:"0",ease:ease},"<").addLabel("finishLoading").to(loader,{opacity:0,duration:duration/3}).to(button,{top:config.buttonChangeY||null,duration:duration},"<").to(jacket,{opacity:1,duration:duration},"<").to(jacketGapFiller,{x:"0",duration:duration},"<").to(background,{backgroundColor:"transparent",duration:0}).call(()=>window.scrollTo(0,0)).addLabel("openCurtains").to(jacketLeft,{x:"-100%",duration:duration*lastSegmentModifier},"<").to(jacketRight,{x:"106%",duration:duration*lastSegmentModifier},"<").to(jacketGapFiller,{x:"100%",duration:duration*lastSegmentModifier},"<").to(button,{x:.895*jacketRight.scrollWidth,duration:duration*lastSegmentModifier},"<").to(preloader,{opacity:0,pointerEvents:"none",duration:0}).addLabel("end")};let timeout,tween;const setProgress=e=>{var t,o;timeline&&(tween=1===e?(clearTimeout(timeout),timeline.tweenTo(timeline.labels.finishLoading,{duration:.3,ease:ease,onComplete:()=>timeline.play()})):(clearTimeout(timeout),t=timeline.labels.loadAndSpin,o=timeline.labels.finishLoading,t=(1-e)*t+e*o,timeline.tweenTo(t,{ease:ease,duration:3})))};let loadsDone=0,loadsRequired=1;const registerLoad=e=>{clearTimeout(timeout),timeout=setTimeout(()=>{setProgress(1)},4e3),loadsDone++,setProgress(loadsDone/loadsRequired)},initialise=()=>{const e=window.innerWidth/window.innerHeight;var t=37*e/100*window.innerHeight,o=window.innerHeight/2,t=o-t;(config.buttonChangeY=0)<t?(config.buttonChangeY=o-t,jacket.style.top=""):(jacket.style.top=t+"px",button.style.top="")},imageLoader=()=>{document.querySelectorAll("[data-preload]").forEach(e=>{loadsRequired++;let t;var o=e.getAttribute("src"),o=(t=o||getComputedStyle(e).backgroundImage.slice(5,-2),document.createElement("img"));o.src=t,o.addEventListener("load",e=>{registerLoad("image loaded")})})};initialise(),calculateTimeline(),imageLoader(),window.addEventListener("resize",()=>{initialise(),calculateTimeline()}),window.addEventListener("load",()=>{registerLoad("on windows load")});